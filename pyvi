#! /usr/bin/env python
"""Script to open source file of a python module in vim.

In the middle of serious python hacking, you might like to see how a class or function is implemented.
This utility helps you by opening the module of interest in vim. 

Usage:
    $ pyvi os.path
"""

from __future__ import print_function

import sys
import os

from importlib.util import find_spec

MODULE_SPEC = find_spec(sys.argv[1])
MODULE_SOURCE = MODULE_SPEC.origin

print(MODULE_SOURCE)

if MODULE_SOURCE.endswith('.pyc'):
    MODULE_SOURCE = MODULE_SOURCE[:-1]

os.chdir(os.path.dirname(MODULE_SOURCE))
os.execlp('view', 'view', '-M', MODULE_SOURCE)
